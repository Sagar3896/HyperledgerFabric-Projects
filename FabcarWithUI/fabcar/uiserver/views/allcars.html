<!DOCTYPE html>
<html>

<head>
  <title>FABCAR</title>
  <style>
    table,
    td {
      border: 1px solid black;
    }

    .bg {
            background-color: rgb(244, 240, 255);
        }
  </style>


</head>

<body class="bg">
 
  <center>
    <h1>Hey <%= username%> !!</h1>
    <h2>
    <a href="/home"> Home</a>
    <br> <br>
    <a href="logout"> Logout</a>
  </h2>
    
    <h2>Details of Car :<br></h2>
    <table id="myTable" border: 1px solid black;>
      <tr>
        <td>Key</td>
        <td>Data</td>
      </tr>
    </table>
  </center>


  <script type="text/javascript">
        function preventBack() { window.history.forward(); }
        setTimeout("preventBack()", 0);
        window.onunload = function () { null };


    var xhttp = new XMLHttpRequest();
    xhttp.open("GET", "/api/queryallcars", false);
    xhttp.send();
    var data = xhttp.responseText;
    //document.write("Details of Car :<br>");  
    //document.write(data);
    //alert(data);


    //const text = '[{"Key":"C1","Record":{"make":"M1","model":"M1","colour":"C1","owner":"O1"}},{"Key":"C22","Record":{"make":"M22","model":"MO22","colour":"CO22","owner":"O22"}}]';
    //const text =  

    const myArr = JSON.parse(data);

    for (let i = 0; i < myArr.length; i++) {
      var table = document.getElementById("myTable");
      var row = table.insertRow(1);
      var cell1 = row.insertCell(0);
      var cell2 = row.insertCell(1);
      cell1.innerHTML = myArr[i].Key;
      cell2.innerHTML = JSON.stringify(myArr[i]);
    }

// document.getElementById("demo1").innerHTML = JSON.stringify(myArr[3]);

// document.getElementById("demo").innerHTML = myArr[3].Key ;
  </script>

</body>

</html>